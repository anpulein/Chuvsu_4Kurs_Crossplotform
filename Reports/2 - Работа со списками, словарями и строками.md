<div>
<p align="center" style="font-size=14pt; font-weight: bolder;">МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ
<br>
Федеральное государственное бюджетное учреждение высшего образования
<br>
«Чувашский государственный университет И.Н. Ульянова»
<br>
Факультет информатики и вычислительной техники 
<br>
Кафедра вычислительной техники
<br> <br> <br> <br> <br> <br> <br><br> <br> <br>
Кросс-платформенные средства разработки программного обеспечения
<br>
Лабораторная работа 2
<br>
«Работа со списками, словарями и строками»
</p>

<br> <br> <br> <br><br> <br><br>

<span>
<p align="right" style="font-size=14pt; font-weight: bolder;">Выполнил:</p>
<p align="right" style="font-size=14pt;">Студент группы ИВТ-41-20 <br>
Галкин Д.С.
</p>
</span> <br>

<span>
<p align="right" style="font-size=14pt; font-weight: bolder;">Проверил:</p>
<p align="right" style="font-size=14pt;">Ковалев С.B.</p>
</span>

<br> <br>
<br> <br>
<br> <br>
<br> <br>
<p align="center" style="font-size=10pt;">Чебоксары, 2023</p>
<div style="page-break-after:always;  visibility:hidden"></div>
</div>

### Цель работы:

1. Усвоение навыков работы со строками и списками в языке Python
2. Ознакомление с некоторыми функциями модулей os и shutil для взаимодействия с операционной системой, в частности, для работы с файлами и каталогами
3. Получение навыков разработки и отладки простейших скриптов для автоматизации рутинных действий с файлами

> [!info] Задание для выполнения
> Скрипты, написанные на языке Python, часто используются для автоматизации рутинных действий, например, для массового копирования, преобразования или удаления файлов по определенному условию.
> В рамках лабораторной работе №2 необходимо написать скрипт, который «уменьшает вложенность» в выбранном каталоге (flatten directory structure). В частности, скрипт должен просматривать содержимое целевого каталога и перемещает файлы из всех его подкаталогов (глубина вложенности может быть произвольной) в этот каталог. При этом имена файлов меняются таким образом, чтобы избежать совпадающих имен и отразить их предыдущее расположение. Новые имена файлов состоят из последовательного перечисления всех промежуточных каталогов и самого имени файла, разделенного нижним подчеркиванием. Пример подобного преобразования показан ниже

![[CleanShot 2023-11-03 at 19.45.56@2x.png]]
<div style="page-break-after:always;  visibility:hidden"></div>

К программе предъявляются следующие требования:
1. Задача обхода вложенных каталогов является, по своей сути, рекурсивной, однако здесь, для получения опыта работы со списками и строками, должна быть решена без использования рекурсии. В целом, нет необходимости, даже, создавать отдельные функции, поскольку полученный скрипт не должен быть более 30-40 строк
2. Целевой каталог задается в виде константы в самом скрипте, но разрешается, также, передавать его в качестве параметра командной строки
3. Скрипт должен перемещать все файлы в соответствии с заданием. Файлы, которые лежат в целевом каталоге не перемещаются и не меняют своего имени
4. После перемещения всех файлов необходимо удалить подкаталоги, поскольку теперь они стали пустыми и больше не нужны

> [!warning] Внимание!
> При тестировании программы, которая реально переименовывает/перемещает файлы, необходимо проявлять осторожность, поскольку данное действие будет необратимым и может привести к потери нужных данных. Рекомендуется работать в специально созданном, демонстрационном, каталоге

<div style="page-break-after:always;  visibility:hidden"></div>

### Полный текст программы:

```python
import os  
import sys  
import shutil  
  
# Проверка наличия аргумента командной строки для целевого каталога  
if len(sys.argv) > 1:  
    target_dir = sys.argv[1]  
else:  
    target_dir = 'Путь'  # Ввести путь к корневому каталогу самостоятельно  
  
  
# Функция, которая перемещает файлы из подкаталога в корневой каталог  
def move_dir(target_directory):  
    for root, _, files in os.walk(target_directory):  
        for file in files:  
            if root != target_directory:  
                new_filename = os.path.relpath(root, target_directory).replace(os.path.sep, '_') + '_' + file  
                new_filepath = os.path.join(target_directory, new_filename)  
                filepath = os.path.join(root, file)  
                shutil.move(filepath, new_filepath)  
  
  
# Функция, которая удаляет пустые каталоги  
def del_empty_dir(target_directory):  
    for root, dirs, _ in os.walk(target_directory, topdown=False):  
        for dir_name in dirs:  
            dir_path = os.path.join(root, dir_name)  
            if not os.listdir(dir_path):  
                os.rmdir(dir_path)  
  
  
move_dir(target_directory=target_dir)  
del_empty_dir(target_directory=target_dir)
```